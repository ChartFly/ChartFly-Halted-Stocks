<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Halted Stocks Tracker</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f4f4f4;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        .header {
            width: 100%;
            text-align: center;
            background: #333;
            color: white;
            padding: 10px 0;
            font-size: 20px;
            font-weight: bold;
        }
        .market-status {
            margin-top: 10px;
            font-size: 16px;
            font-weight: bold;
            padding: 5px 15px;
            border-radius: 5px;
            color: white;
        }
        .market-open { background-color: green; }
        .market-closed { background-color: red; }
        .holidays {
            margin-top: 10px;
            padding: 10px;
            background: #fff8e1;
            border: 1px solid #ffd54f;
            width: 90%;
            text-align: center;
            font-size: 10px;
        }
        .holidays table {
            width: 100%;
            border-collapse: collapse;
            text-align: center;
        }
        .holidays td {
            padding: 5px;
            border: 1px solid #ffd54f;
        }
        .container {
            display: flex;
            justify-content: center;
            width: 90%;
            gap: 20px;
        }
        .table-container {
            padding: 15px;
            background: white;
            border: 1px solid #ddd;
            box-shadow: 2px 2px 10px rgba(0, 0, 0, 0.1);
            width: 90%;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            background: white;
        }
        th, td {
            border: 1px solid #ddd;
            padding: 6px;
            text-align: left;
            font-size: 12px;
        }
        th {
            background: #333;
            color: white;
        }
        .last-update {
            text-align: center;
            font-size: 12px;
            margin-top: 10px;
        }
    </style>
</head>
<body>
    <div class="header">ChartFly - Educational tools and information for active day traders</div>
    <div id="market-status" class="market-status">Checking market status...</div>
    <div class="holidays">
        <h3>Upcoming U.S. Stock Market Holidays</h3>
        <table>
            <tr>
                <td>January 1 (New Yearâ€™s Day)</td>
                <td>February 17 (Presidents' Day)</td>
                <td>April 18 (Good Friday)</td>
                <td>May 26 (Memorial Day)</td>
                <td>July 4 (Independence Day)</td>
                <td>September 1 (Labor Day)</td>
            </tr>
            <tr>
                <td>November 27 (Thanksgiving)</td>
                <td>December 25 (Christmas)</td>
                <td>October - No Holiday</td>
                <td>March - No Holiday</td>
                <td>June - No Holiday</td>
                <td>August - No Holiday</td>
            </tr>
        </table>
    </div>
    <div class="container">
        <div class="table-container">
            <h2>Halted Stocks Tracker</h2>
            <p id="last-update" class="last-update">Loading...</p>
            <table>
                <thead>
                    <tr>
                        <th>Halt Date</th>
                        <th>Halt Time</th>
                        <th>Issue Symbol</th>
                        <th>Issue Name</th>
                        <th>Market</th>
                        <th>Reason Code</th>
                        <th>Definition</th>
                        <th>Pause Threshold Price</th>
                        <th>Resumption Date</th>
                        <th>Resumption Quote Time</th>
                        <th>Resumption Trade Time</th>
                    </tr>
                </thead>
                <tbody id="halted-stocks">
                    <tr><td colspan="11">Loading halted stocks...</td></tr>
                </tbody>
            </table>
        </div>
    </div>
    <script>
        const API_KEY = "YOUR_API_KEY_HERE";
        const NASDAQ_API_URL = `https://data.nasdaq.com/api/v3/datatables/your_endpoint?api_key=${API_KEY}`;

        async function fetchHaltedStocks() {
            try {
                let response = await fetch(NASDAQ_API_URL);
                let data = await response.json();
                
                let tableBody = document.getElementById("halted-stocks");
                tableBody.innerHTML = ""; 
                
                if (!data || !data.datatable || !data.datatable.data.length) {
                    tableBody.innerHTML = "<tr><td colspan='11'>No active trading halts.</td></tr>";
                    return;
                }
                
                for (let row of data.datatable.data) {
                    let [haltDate, haltTime, symbol, name, market, reasonCode, thresholdPrice, resumptionDate, quoteTime, tradeTime] = row;
                    let reasonDefinition = reasonDefinitions[reasonCode] || "Definition not available";
                    
                    let rowHTML = `<tr>
                        <td>${haltDate || ""}</td>
                        <td>${haltTime || ""}</td>
                        <td>${symbol || ""}</td>
                        <td>${name || ""}</td>
                        <td>${market || ""}</td>
                        <td>${reasonCode || ""}</td>
                        <td>${reasonDefinition}</td>
                        <td>${thresholdPrice || ""}</td>
                        <td>${resumptionDate || ""}</td>
                        <td>${quoteTime || ""}</td>
                        <td>${tradeTime || ""}</td>
                    </tr>`;
                    tableBody.innerHTML += rowHTML;
                }
            } catch (error) {
                console.error("Error fetching halted stocks:", error);
                document.getElementById("halted-stocks").innerHTML = "<tr><td colspan='11'>Failed to load data.</td></tr>";
            }
        }
        
        fetchHaltedStocks();
        setInterval(fetchHaltedStocks, 60000);
    </script>
</body>
</html>
